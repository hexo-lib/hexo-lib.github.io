<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="John Doe">





<title>定时任务框架 | Hexo</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 7.2.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const currentTheme = window.localStorage && window.localStorage.getItem('theme') || '';
            const isDark = currentTheme === 'dark';
            const pagebody = document.getElementsByTagName('body')[0]
            if (isDark) {
                pagebody.classList.add('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Dark"
            } else {
                pagebody.classList.remove('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Light"
            }
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Bentham&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Bentham&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">定时任务框架</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">John Doe</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">December 13, 2017&nbsp;&nbsp;20:34:36</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/cms/">cms</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <p><img src="https://s2.loli.net/2023/04/16/XDgYZ2RMLxIl7Vd.jpg"></p>
<p>ScheduleIterator接口 import java.util.Date;public interface ScheduleIterator {    public Date next();&#x2F;&#x2F;获取下一个触发的时间点} Scheduler类 import java.</p>
<span id="more"></span>

<p>定时任务框架代码。<br>整个框架就3个类： </p>
<ul>
<li>ScheduleIterator.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ScheduleIterator</span> &#123;</span><br><span class="line">	Date <span class="title function_">next</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<ul>
<li>Scheduler.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Timer;</span><br><span class="line"><span class="keyword">import</span> java.util.TimerTask;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Scheduler</span> &#123;</span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">SchedulerTimerTask</span> <span class="keyword">extends</span> <span class="title class_">TimerTask</span> &#123;</span><br><span class="line">		<span class="keyword">private</span> SchedulerTask schedulerTask;</span><br><span class="line">		<span class="keyword">private</span> ScheduleIterator iterator;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">public</span> <span class="title function_">SchedulerTimerTask</span><span class="params">(SchedulerTask schedulerTask, ScheduleIterator iterator)</span> &#123;</span><br><span class="line">			<span class="built_in">this</span>.schedulerTask = schedulerTask;</span><br><span class="line">			<span class="built_in">this</span>.iterator = iterator;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">			schedulerTask.run();</span><br><span class="line">			reschedule(schedulerTask, iterator);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Timer</span> <span class="variable">timer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Timer</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Scheduler</span><span class="params">()</span> &#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cancel</span><span class="params">()</span> &#123;</span><br><span class="line">		timer.cancel();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">schedule</span><span class="params">(SchedulerTask schedulerTask, ScheduleIterator iterator)</span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="type">Date</span> <span class="variable">time</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">		<span class="keyword">if</span> (time == <span class="literal">null</span>) &#123;</span><br><span class="line">			schedulerTask.cancel();</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">synchronized</span> (schedulerTask.lock) &#123;</span><br><span class="line">				<span class="keyword">if</span> (schedulerTask.state != SchedulerTask.VIRGIN) &#123;</span><br><span class="line">					<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;Task already scheduled or cancelled&quot;</span>);</span><br><span class="line">				&#125;</span><br><span class="line">				schedulerTask.state = SchedulerTask.SCHEDULED;</span><br><span class="line">				schedulerTask.timerTask = <span class="keyword">new</span> <span class="title class_">SchedulerTimerTask</span>(schedulerTask, iterator);</span><br><span class="line">				timer.schedule(schedulerTask.timerTask, time);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">reschedule</span><span class="params">(SchedulerTask schedulerTask, ScheduleIterator iterator)</span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="type">Date</span> <span class="variable">time</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">		<span class="keyword">if</span> (time == <span class="literal">null</span>) &#123;</span><br><span class="line">			schedulerTask.cancel();</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">synchronized</span> (schedulerTask.lock) &#123;</span><br><span class="line">				<span class="keyword">if</span> (schedulerTask.state != SchedulerTask.CANCELLED) &#123;</span><br><span class="line">					schedulerTask.timerTask = <span class="keyword">new</span> <span class="title class_">SchedulerTimerTask</span>(schedulerTask, iterator);</span><br><span class="line">					timer.schedule(schedulerTask.timerTask, time);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<ul>
<li>SchedulerTask.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.TimerTask;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">SchedulerTask</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">	<span class="keyword">final</span> <span class="type">Object</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> <span class="variable">state</span> <span class="operator">=</span> VIRGIN;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">VIRGIN</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SCHEDULED</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">CANCELLED</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">	TimerTask timerTask;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">protected</span> <span class="title function_">SchedulerTask</span><span class="params">()</span> &#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">cancel</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">			<span class="keyword">if</span> (timerTask != <span class="literal">null</span>) &#123;</span><br><span class="line">				timerTask.cancel();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> (state == SCHEDULED);</span><br><span class="line">			state = CANCELLED;</span><br><span class="line">			<span class="keyword">return</span> result;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="type">long</span> <span class="title function_">scheduledExecutionTime</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">			<span class="keyword">return</span> timerTask == <span class="literal">null</span> ? <span class="number">0</span> : timerTask.scheduledExecutionTime();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>自己写的ScheduleIterator  实现类 以及一个测试类 </p>
<ul>
<li>SimpleScheduleIterator.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.GregorianCalendar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.jeecms.common.task.scheduling.ScheduleIterator;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 时间进度迭代器 &lt;li&gt;返回 月/周/天/小时/分钟/秒 计划的下一次执行时间&lt;/li&gt; &lt;li&gt;约定：参数以逗号分隔,*号表示无值&lt;/li&gt; &lt;li&gt;</span></span><br><span class="line"><span class="comment"> * 参数解释： &lt;br&gt;</span></span><br><span class="line"><span class="comment"> * 第一位：每个月的第几周&lt;/br&gt; &lt;br&gt;</span></span><br><span class="line"><span class="comment"> * 第二位：每周的第几天&lt;/br&gt; &lt;br&gt;</span></span><br><span class="line"><span class="comment"> * 第三位：天(几号)&lt;/br&gt; &lt;br&gt;</span></span><br><span class="line"><span class="comment"> * 第四位：小时(24小时制)&lt;/br&gt; &lt;br&gt;</span></span><br><span class="line"><span class="comment"> * 第五位：分钟&lt;/br&gt; &lt;br&gt;</span></span><br><span class="line"><span class="comment"> * 第六位：秒&lt;/br&gt;&lt;/li&gt; &lt;li&gt;参数样例： &lt;br&gt;</span></span><br><span class="line"><span class="comment"> * 1,6,4,15,20,30 表示 从今天的15:20:30开始，每隔一个月执行一次,即下次执行时间是 下个月的第一周的第6天的15:20:30&lt;/br&gt;</span></span><br><span class="line"><span class="comment"> * &lt;br&gt;</span></span><br><span class="line"><span class="comment"> * *,6,4,15,20,30 表示 从今天的15:20:30开始，每隔一周执行一次,即下次执行时间是 下一周的第6天的15:20:30&lt;/br&gt; &lt;br&gt;</span></span><br><span class="line"><span class="comment"> * *,*,4,15,20,30 表示 从今天的15:20:30开始，每隔一天执行一次,即下次执行时间是 下一天的15:20:30&lt;/br&gt; &lt;br&gt;</span></span><br><span class="line"><span class="comment"> * *,*,*,15,20,30 表示 从今天的15:20:30开始，每隔一小时执行一次,即下次执行时间是 16:20:30&lt;/br&gt; &lt;br&gt;</span></span><br><span class="line"><span class="comment"> * *,*,*,*,20,30 表示 从这个小时的20:30开始，每隔一分钟执行一次,即下次执行时间是 *:21:30&lt;/br&gt; &lt;br&gt;</span></span><br><span class="line"><span class="comment"> * *,*,*,*,*,30 表示 从当前时间的30秒开始，每隔一秒执行一次,即下次执行时间是 *:*:31&lt;/br&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> javacoo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2011-11-03</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SimpleScheduleIterator</span> <span class="keyword">implements</span> <span class="title class_">ScheduleIterator</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> ScheduleParamBean scheduleParamBean;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Calendar</span> <span class="variable">calendar</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Calendar</span> <span class="variable">orginCalendar</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">SimpleScheduleIterator</span><span class="params">(<span class="keyword">final</span> ScheduleParamBean scheduleParamBean)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>(scheduleParamBean, <span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">SimpleScheduleIterator</span><span class="params">(<span class="keyword">final</span> ScheduleParamBean scheduleParamBean, Date date)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.scheduleParamBean = scheduleParamBean;</span><br><span class="line"></span><br><span class="line">		orginCalendar.setTime(date);</span><br><span class="line">		calendar.setTime(date);</span><br><span class="line">		<span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getWeekOfMonth()) &#123;</span><br><span class="line">			calendar.set(Calendar.WEEK_OF_MONTH, scheduleParamBean.getWeekOfMonth());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 如果设置了每周的第几天和一个月的第几天，则忽略一个月的第几天</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getDayOfWeek()) &#123;</span><br><span class="line">			calendar.set(Calendar.DAY_OF_WEEK, scheduleParamBean.getDayOfWeek());</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getDayOfMonth()) &#123;</span><br><span class="line">			calendar.set(Calendar.DAY_OF_MONTH, scheduleParamBean.getDayOfMonth());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getHourOfDay()) &#123;</span><br><span class="line">			calendar.set(Calendar.HOUR_OF_DAY, scheduleParamBean.getHourOfDay());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getMinute()) &#123;</span><br><span class="line">			calendar.set(Calendar.MINUTE, scheduleParamBean.getMinute());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getSecond()) &#123;</span><br><span class="line">			calendar.set(Calendar.SECOND, scheduleParamBean.getSecond());</span><br><span class="line">		&#125;</span><br><span class="line">		calendar.set(Calendar.MILLISECOND, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (!calendar.getTime().before(date)) &#123;</span><br><span class="line">			System.out.println(calendar.getTime() + <span class="string">&quot;大于当前时间：&quot;</span> + date);</span><br><span class="line">			<span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getWeekOfMonth()) &#123;</span><br><span class="line">				calendar.add(Calendar.MONTH, -<span class="number">1</span>);</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getDayOfWeek()) &#123;</span><br><span class="line">				calendar.add(Calendar.DAY_OF_WEEK, -<span class="number">6</span>);</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getDayOfMonth()) &#123;</span><br><span class="line">				calendar.add(Calendar.DAY_OF_MONTH, -<span class="number">1</span>);</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getHourOfDay()) &#123;</span><br><span class="line">				calendar.add(Calendar.HOUR_OF_DAY, -<span class="number">1</span>);</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getMinute()) &#123;</span><br><span class="line">				calendar.add(Calendar.MINUTE, -<span class="number">1</span>);</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getSecond()) &#123;</span><br><span class="line">				calendar.add(Calendar.SECOND, -<span class="number">1</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			System.out.println(calendar.getTime() + <span class="string">&quot;小于当前时间：&quot;</span> + date);</span><br><span class="line">			<span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getDayOfMonth()) &#123;</span><br><span class="line">				calendar.add(Calendar.DAY_OF_MONTH, orginCalendar.get(Calendar.DAY_OF_MONTH) - scheduleParamBean.getDayOfMonth());</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getHourOfDay()) &#123;</span><br><span class="line">				calendar.add(Calendar.HOUR_OF_DAY, orginCalendar.get(Calendar.HOUR_OF_DAY) - scheduleParamBean.getHourOfDay());</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getMinute()) &#123;</span><br><span class="line">				calendar.add(Calendar.MINUTE, orginCalendar.get(Calendar.MINUTE) - scheduleParamBean.getMinute());</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getSecond()) &#123;</span><br><span class="line">				calendar.add(Calendar.SECOND, orginCalendar.get(Calendar.SECOND) - scheduleParamBean.getSecond());</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Date <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getWeekOfMonth()) &#123;</span><br><span class="line">			calendar.add(Calendar.MONTH, <span class="number">1</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getDayOfWeek()) &#123;</span><br><span class="line">			calendar.add(Calendar.DAY_OF_WEEK, <span class="number">6</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getDayOfMonth()) &#123;</span><br><span class="line">			calendar.add(Calendar.DAY_OF_MONTH, <span class="number">1</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getHourOfDay()) &#123;</span><br><span class="line">			calendar.add(Calendar.HOUR_OF_DAY, <span class="number">1</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getMinute()) &#123;</span><br><span class="line">			calendar.add(Calendar.MINUTE, <span class="number">1</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="literal">null</span> != scheduleParamBean.getSecond()) &#123;</span><br><span class="line">			calendar.add(Calendar.SECOND, <span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">&quot;下次执行时间:&quot;</span> + calendar.getTime());</span><br><span class="line">		<span class="keyword">return</span> calendar.getTime();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ScheduleParamBean.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 时间计划参数bean</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> javacoo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2011-11-04</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ScheduleParamBean</span> &#123;</span><br><span class="line">	<span class="comment">/** 每个月的第几周,每周的第几天,每个月的第几天,小时(24小时制),分钟,秒 */</span></span><br><span class="line">	<span class="keyword">private</span> Integer weekOfMonth, dayOfWeek, dayOfMonth, hourOfDay, minute, second;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">ScheduleParamBean</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">ScheduleParamBean</span><span class="params">(Integer weekOfMonth, Integer dayOfWeek, Integer dayOfMonth, Integer hourOfDay, Integer minute, Integer second)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>();</span><br><span class="line">		<span class="built_in">this</span>.weekOfMonth = weekOfMonth;</span><br><span class="line">		<span class="built_in">this</span>.dayOfWeek = dayOfWeek;</span><br><span class="line">		<span class="built_in">this</span>.dayOfMonth = dayOfMonth;</span><br><span class="line">		<span class="built_in">this</span>.hourOfDay = hourOfDay;</span><br><span class="line">		<span class="built_in">this</span>.minute = minute;</span><br><span class="line">		<span class="built_in">this</span>.second = second;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Integer <span class="title function_">getWeekOfMonth</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> weekOfMonth;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWeekOfMonth</span><span class="params">(Integer weekOfMonth)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.weekOfMonth = weekOfMonth;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Integer <span class="title function_">getDayOfWeek</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> dayOfWeek;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDayOfWeek</span><span class="params">(Integer dayOfWeek)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.dayOfWeek = dayOfWeek;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Integer <span class="title function_">getDayOfMonth</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> dayOfMonth;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDayOfMonth</span><span class="params">(Integer dayOfMonth)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.dayOfMonth = dayOfMonth;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Integer <span class="title function_">getHourOfDay</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> hourOfDay;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHourOfDay</span><span class="params">(Integer hourOfDay)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.hourOfDay = hourOfDay;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Integer <span class="title function_">getMinute</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> minute;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMinute</span><span class="params">(Integer minute)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.minute = minute;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Integer <span class="title function_">getSecond</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> second;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSecond</span><span class="params">(Integer second)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.second = second;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;ScheduleParamBean [dayOfMonth=&quot;</span> + dayOfMonth + <span class="string">&quot;, dayOfWeek=&quot;</span> + dayOfWeek + <span class="string">&quot;, hourOfDay=&quot;</span> + hourOfDay + <span class="string">&quot;, minute=&quot;</span> + minute</span><br><span class="line">				+ <span class="string">&quot;, second=&quot;</span> + second + <span class="string">&quot;, weekOfMonth=&quot;</span> + weekOfMonth + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>TestSchedule.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> javacoo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2011-11-03</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSchedule</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Scheduler</span> <span class="variable">scheduler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scheduler</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> ScheduleParamBean scheduleParamBean;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">TestSchedule</span><span class="params">(<span class="keyword">final</span> ScheduleParamBean scheduleParamBean)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.scheduleParamBean = scheduleParamBean;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span> &#123;</span><br><span class="line">		scheduler.schedule(<span class="keyword">new</span> <span class="title class_">SchedulerTask</span>() &#123;</span><br><span class="line">			<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">				execute();</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">()</span> &#123;</span><br><span class="line">				System.out.println(<span class="string">&quot;任务执行&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;, <span class="keyword">new</span> <span class="title class_">SimpleScheduleIterator</span>(scheduleParamBean));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="type">ScheduleParamBean</span> <span class="variable">scheduleParamBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ScheduleParamBean</span>();</span><br><span class="line">		scheduleParamBean.setWeekOfMonth(<span class="number">1</span>);</span><br><span class="line">		scheduleParamBean.setDayOfWeek(<span class="number">6</span>);</span><br><span class="line">		scheduleParamBean.setDayOfMonth(<span class="number">4</span>);</span><br><span class="line">		scheduleParamBean.setHourOfDay(<span class="number">16</span>);</span><br><span class="line">		scheduleParamBean.setMinute(<span class="number">22</span>);</span><br><span class="line">		scheduleParamBean.setSecond(<span class="number">0</span>);</span><br><span class="line">		<span class="type">TestSchedule</span> <span class="variable">test</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestSchedule</span>(scheduleParamBean);</span><br><span class="line">		test.start();</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>以下是整合到JEECMS采集器多线程版的代码片段 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * 开始执行采集任务 </span></span><br><span class="line"><span class="comment"> */</span> </span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">start</span><span class="params">(Integer id)</span> &#123; </span><br><span class="line"><span class="type">CmsAcquisition</span> <span class="variable">acqu</span> <span class="operator">=</span> cmsAcquisitionMng.findById(id); </span><br><span class="line"><span class="keyword">if</span> (acqu == <span class="literal">null</span> || acqu.getStatus() == CmsAcquisition.START) &#123; </span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="type">TaskSchedulerManage</span> <span class="variable">taskManage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TaskSchedulerManage</span>(<span class="built_in">this</span>,acqu); </span><br><span class="line">taskManage.start(); </span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">TaskSchedulerManage</span> &#123; </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Scheduler</span> <span class="variable">scheduler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scheduler</span>(); </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> MultiThreadAcquisitionSvcImpl multiThreadAcquisitionSvc; </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> CmsAcquisition acqu; </span><br><span class="line"><span class="keyword">public</span> <span class="title function_">TaskSchedulerManage</span><span class="params">(MultiThreadAcquisitionSvcImpl multiThreadAcquisitionSvc,CmsAcquisition acqu)</span> &#123; </span><br><span class="line"><span class="built_in">this</span>.multiThreadAcquisitionSvc = multiThreadAcquisitionSvc; </span><br><span class="line"><span class="built_in">this</span>.acqu = acqu; </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span> &#123; </span><br><span class="line">scheduler.schedule(<span class="keyword">new</span> <span class="title class_">SchedulerTask</span>() &#123; </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123; </span><br><span class="line">processer(); </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">processer</span><span class="params">()</span> &#123; </span><br><span class="line">System.out.println(<span class="string">&quot;============开始执行计划任务=================&quot;</span>); </span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">MainThreadProcesser</span>(multiThreadAcquisitionSvc,acqu)).start(); </span><br><span class="line">&#125; </span><br><span class="line">&#125;, <span class="keyword">new</span> <span class="title class_">SimpleScheduleIterator</span>(<span class="keyword">new</span> <span class="title class_">ScheduleParamBean</span>(<span class="number">1</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">17</span>,<span class="number">24</span>,<span class="number">30</span>))); </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>注：关键是 ScheduleIterator实现类了，框架有多强大 完全取决于你的ScheduleIterator实现类了。 </p>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>John Doe</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="http://example.com/2017/12/13/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E6%A1%86%E6%9E%B6/">http://example.com/2017/12/13/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E6%A1%86%E6%9E%B6/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Do you believe in <strong>DESTINY</strong>?</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/java/"># java</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2017/12/13/%E5%8C%97%E6%96%B9%E7%9A%84%E7%A9%BA%E5%9C%B02/">北方的空地</a>
            
            
            <a class="next" rel="next" href="/2017/12/08/%E4%BB%A3%E7%A0%81%E5%8E%BB%E9%99%A4%E7%BC%96%E5%8F%B7%E5%B0%8F%E6%8A%80%E5%B7%A7/">代码去除编号小技巧</a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>© John Doe | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>

</html>